<div class="topWatchlistContainer">
    <div class="watchlistOptionsContainer">
        <div class="watchlistLeftOptionsContainer">
            <div class="watchlistTitleContainer">
                <div class="watchlistHeader">
                    <h3>Your Watchlists</h3>
                </div>
            </div>
            <div class="leftOptionsContainer">
                <div class="watchlistSelectContainer">
                    <select [value]="this.currentWatchlist" (change)="onWatchlistChange($event)">
                        <option value="primary">{{usersWatchlists.watchlist_one_title}}</option>
                        <option value="secondary">{{usersWatchlists.watchlist_two_title}}</option>
                        <option value="tertiary">{{usersWatchlists.watchlist_three_title}}</option>
                    </select>
                </div>
                <div class="addStockBtn">
                    <button (click)="testOpenModal()">Add Stock</button>
                </div>
                <div class="stockAlreadyInWatchlist" [@myInsertRemoveTrigger] *ngIf="cannotAddStock">
                    <p>Stock already in watchlist</p>
                </div>
            </div>   
        </div>
        <div class="watchlistRightOptionsContainer">
            <div class="stockPurchaseAmtContainer">
                <label>Investment</label>
                <input type="text" placeholder="0" [value]="amountToInvest" (keyup)="onEditAmountToInvest($event)">
            </div>
        </div>
    </div>
        <table>
            <thead>
                <tr class="tableHeaders">
                    <th>Ticker</th>
                    <th class="stockNameColumn">Name</th>
                    <th></th>
                    <th>Price</th>
                    <th>Change</th>
                    <th>% Change</th>
                    <th>Volume</th>
                    <th>Market Cap</th>
                    <th>P/E Ratio</th>
                    <th>52 Week High</th>
                    <th>52 Week Low</th>
                    <th>Purchase Amount</th>
                    <th>% of Purchase</th>
                </tr>
            </thead>
            <tbody>
                <tr *ngFor="let stock of renderedWatchlist" class="tableRows">
                    <td>{{stock.ticker}}<br></td>
                    <td class="stockNameColumn">{{stock.name}}</td>
                    <td>
                        <div class="stockOptionsDropdown">
                            <button (click)="showStockOptions(stock.id)" class="dropBtn">
                                <mat-icon class="menuBtn">more_vert</mat-icon>
                            </button>

                            <div class="stockOptionsDropdownContent">
                                <a (click)="onResearchStock(stock.ticker)">Research</a>
                                <a (click)="onDeleteStock(stock)">Delete</a>
                            </div>
                        </div>
                    </td>
                    <td>{{stock.price}}</td>
                    <td [ngClass]="{
                        'positive_change': !stock.days_change.includes('-'),
                        'negative_change': stock.days_change.includes('-')}">
                        {{stock.days_change.includes('-') ? '-' : '+'}}${{stock.days_change.replace('-', '')}}</td>
                    <td [ngClass]="{
                        'positive_change': !stock.days_change.includes('-'),
                        'negative_change': stock.days_change.includes('-')}">
                    {{stock.days_change.includes('-') ? '' : '+'}}{{stock.percent_change}}</td>
                    <td>{{stock.volume}}</td>
                    <td>{{stock.market_cap}}</td>
                    <td>{{stock.pe_ratio}}</td>
                    <td>${{stock.fifty_two_week_high}}</td>
                    <td>${{stock.fifty_two_week_low}}</td>
                    <td>${{stock.purchase_amt}}</td>
                    <td class="lastColumn">
                        <input type="text" placeholder="10%" [value]="stock.percent_of_purchase" (keyup)="onEditPercentOfPurchase($event, stock)">
                    </td>
                </tr>
            </tbody>
        </table>
</div>
<app-custom-add-stock-modal (onStockPicked)="addStockToWatchlist($event)"></app-custom-add-stock-modal>
<app-prompt-signup-modal></app-prompt-signup-modal>
